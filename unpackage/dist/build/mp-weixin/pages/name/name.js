(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/name/name"],{"2f21":function(e,o,t){"use strict";(function(e){t("e486");n(t("66fd"));var o=n(t("8a1b"));function n(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])},"41ff":function(e,o,t){"use strict";var n,i=function(){var e=this,o=e.$createElement;e._self._c},a=[];t.d(o,"b",(function(){return i})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return n}))},"6db3":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(){Promise.all([t.e("common/vendor"),t.e("components/quick-calendar/calendar")]).then(function(){return resolve(t("b87d"))}.bind(null,t)).catch(t.oe)},i=function(){Promise.all([t.e("common/vendor"),t.e("components/pick-regions/pick-regions")]).then(function(){return resolve(t("7415"))}.bind(null,t)).catch(t.oe)},a={components:{zanCalendar:n,pickRegions:i},data:function(){return{date:"2020-05-27",time:"0-26",isHourShow:!1,isMinShow:!1,lunarType:"number",dateDialog:!1,calendar:"",type:0,endDate:"",wishList:[],radio:0,step:1,form:{year:"",month:"",day:"",hour:""},sex:["男","女"],sexIndex:0,region:[],region1:[],defaultRegion:["北京","市辖区","东城区"],defaultRegionCode:"110101",nameForom:{surname:"",name:""},birthday:"",hasPhone:!1}},computed:{regionName:function(){return this.region.map((function(e){return e.name})).join(" ")},regionName1:function(){return this.region1.map((function(e){return e.name})).join(" ")}},onLoad:function(o){var t=this;e.getStorage({key:"wishList",success:function(e){console.log(e.data),t.wishList=e.data||[]}}),this.hasPhone=!!e.getStorageSync("phone")},methods:{getPhoneNumber:function(o){var t=this;return console.log(o),"getPhoneNumber:fail"==o.detail.errMsg?(console.log(ErrMsg),e.showToast({title:"未获取到手机号码",icon:"none"}),!1):void 0!=o.detail.iv&&o.detail.iv?void wx.checkSession({success:function(n){console.log("处于登录态"),t.$api.post("/api/user/get_user_phone",{user_id:e.getStorageSync("user_id"),session_key:e.getStorageSync("session_key"),iv:o.detail.iv,encryptedData:o.detail.encryptedData}).then((function(o){console.log(o),t.hasPhone=!0,e.setStorage({key:"phone",data:"1",success:function(){t.goMatchDojo()},fail:function(e){console.log(e)}})}))},fail:function(n){console.log("需要重新登录"),wx.login({success:function(n){n.code&&(console.log(n),t.$api.post("/api/user/get_user_phone",{code:n.code,iv:o.detail.iv,encryptedData:o.detail.encryptedData}).then((function(o){console.log(o),t.hasPhone=!0,e.setStorage({key:"phone",data:"1",success:function(){t.goMatchDojo()},fail:function(e){console.log(e)}})})))}})}}):(e.showToast({title:"授权失败",icon:"none"}),!1)},goMatchDojo:function(){var o=this;if(""!=this.nameForom.name&&""!=this.nameForom.surname){var t=e.getStorageSync("date"),n=(e.getStorageSync("dateType"),e.getStorageSync("sex")),i=e.getStorageSync("position1")[2].code,a=e.getStorageSync("position2")[2].code;this.$api.post("/api/prayer",{heart_want:JSON.stringify(this.wishList),birthdate:0==this.type?"阳历":"阴历",birthday:t,sex:0==n?1:0,birthplace:i,nowplace:a,surname:this.nameForom.surname,name:this.nameForom.name,user_id:e.getStorageSync("user_id")}).then((function(t){console.log(t),e.setStorageSync("paryData",t.prayer),e.setStorageSync("name",o.nameForom.surname+o.nameForom.name),e.setStorageSync("first",t.first),e.setStorageSync("detail",t.dojo),e.navigateTo({url:"/pages/matchDojo/matchDojo"})}))}else e.showToast({title:"姓氏名讳不能为空",icon:"none"})},selSex:function(e){this.sexIndex=e,console.log(e)},selRadio:function(e){console.log(e),this.radio!==e&&(this.radio=e)},submit:function(){if(console.log(this.form),1==this.step){if(""==this.birthday)return void e.showToast({title:"请选择生辰",icon:"none"})}else if(3==this.step){if(this.region.length<=0||this.region1.length<=0)return void e.showToast({title:"请选择方位",icon:"none"})}else if(4==this.step)return;this.step++},getType:function(e){this.type="solar"===e?0:1,console.log(this.type)},showDateDialog:function(e,o){switch(e){case 1:this.isHourShow=!1,this.isMinShow=!1;break;case 2:this.isHourShow=!0,this.isMinShow=!1;break;case 3:this.isHourShow=!0,this.isMinShow=!0;break}this.dateDialog=!0,this.lunarType=o},closeDialog:function(){this.dateDialog=!1},confirmDialog:function(e){console.log(e);var o="";0==e.type?(o="阳历:"+e.t1,this.birthday=e.t1):(o="阴历:"+e.t2,this.birthday=e.t2),this.endDate=o,console.log("选择的日期是："+e.date),console.log("选择的时间是："+e.time),this.closeDialog()},handleGetRegion:function(e){this.region=e},handleGetRegion1:function(e){this.region1=e}}};o.default=a}).call(this,t("543d")["default"])},"8a1b":function(e,o,t){"use strict";t.r(o);var n=t("41ff"),i=t("f291");for(var a in i)"default"!==a&&function(e){t.d(o,e,(function(){return i[e]}))}(a);t("bda3");var s,r=t("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);o["default"]=c.exports},a296:function(e,o,t){},bda3:function(e,o,t){"use strict";var n=t("a296"),i=t.n(n);i.a},f291:function(e,o,t){"use strict";t.r(o);var n=t("6db3"),i=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(o,e,(function(){return n[e]}))}(a);o["default"]=i.a}},[["2f21","common/runtime","common/vendor"]]]);