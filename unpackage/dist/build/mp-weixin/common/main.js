(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{1833:function(e,t,n){"use strict";(function(e,t){n("e486");var o=c(n("66fd")),a=c(n("3319")),r=c(n("4cf0"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.default.defaults.baseURL="https://www.csdc8.top",r.default.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.default.interceptors.request.use((function(t){return t.headers["Authorization"]="Bearer "+e.getStorageSync("token"),t}),(function(t){return e.showLoading({title:"网络故障",mask:"true"}),Promise.reject(t)})),r.default.interceptors.response.use((function(t){return console.log(t),200==t.status&&200===t.data.code?Promise.resolve(t.data.data):401!==t.status?(e.showToast({title:t.data.message,icon:"none"}),Promise.reject(t.data)):(e.showToast({title:"登录过期",icon:"none",duration:500}),e.clearStorageSync(),void setTimeout((function(){return e.reLaunch({url:"/pages/index/index"}),Promise.reject(t.data.data)}),1500))}),(function(t){return e.hideLoading(),e.showLoading({title:"网络故障...",mask:"true"}),Promise.reject(t)})),o.default.config.productionTip=!1,o.default.prototype.$api=r.default,a.default.mpType="app";var l=new o.default(u({},a.default));t(l).$mount()}).call(this,n("543d")["default"],n("543d")["createApp"])},"2a9f":function(e,t,n){},3319:function(e,t,n){"use strict";n.r(t);var o=n("d710");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("5cd7");var r,c,s,u,i=n("f0c5"),l=Object(i["a"])(o["default"],r,c,!1,null,null,null,!1,s,u);t["default"]=l.exports},"5cd7":function(e,t,n){"use strict";var o=n("2a9f"),a=n.n(o);a.a},a6bf:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("4cf0"));function a(e){return e&&e.__esModule?e:{default:e}}var r={onLaunch:function(){var t=this;console.log("App Launch");var n=e.getStorageSync("token")||"";console.log(n),n?t.getStatus():wx.login({success:function(n){n.code?(console.log(t),t.$api.post("api/user/login",{code:n.code}).then((function(n){n.access_token&&(t.hasToken=!0,n.first||(e.setStorageSync("token",n.access_token),e.setStorageSync("user_id",n.user_id),t.getStatus()))}))):console.log("登录失败！"+n.errMsg)}})},onShow:function(){this.autoUpdate(),console.log("App Show")},onHide:function(){console.log("App Hide")},methods:{getStatus:function(){this.$api.get("api/pray/show").then((function(t){console.log(t),e.setStorageSync("paryData",t.prayer),1==t.status?e.redirectTo({url:"/pages/package/package?detail="+JSON.stringify(t.dojo)+"&status=1"}):0==t.status&&e.redirectTo({url:"/pages/package/package?detail="+JSON.stringify(t.dojo)+"&expired=1"})}))},getInfo:function(){var t=e.getStorageSync("token");console.log(t),t&&o.default.post("user/getMine",{token:t}).then((function(t){console.log(t);var n=t.user;if(e.getStorageSync("userInfo")){var o=JSON.parse(e.getStorageSync("userInfo"));o.amount!==n.amount?(e.showTabBarRedDot({index:2}),e.setStorageSync("amountChange","1")):e.setStorageSync("amountChange","0"),e.setStorageSync("userInfo",JSON.stringify(n))}}))},autoUpdate:function(){console.log(new Date);var e=this;if(wx.canIUse("getUpdateManager")){var t=wx.getUpdateManager();t.onCheckForUpdate((function(n){n.hasUpdate&&(t.onUpdateReady((function(){console.log(new Date),wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(n){n.confirm?t.applyUpdate():n.cancel&&wx.showModal({title:"温馨提示~",content:"本次版本更新涉及到新的功能添加，旧版本无法正常访问的哦~",success:function(t){e.autoUpdate()}})}})})),t.onUpdateFailed((function(){wx.showModal({title:"已经有新版本了哟~",content:"新版本已经上线啦~，请您删除当前小程序，重新搜索打开哟~"})})))}))}else wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"})}}};t.default=r}).call(this,n("543d")["default"])},d710:function(e,t,n){"use strict";n.r(t);var o=n("a6bf"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a}},[["1833","common/runtime","common/vendor"]]]);